{"ast":null,"code":"var _jsxFileName = \"C:\\\\React Projects\\\\andreas-ecommerce\\\\src\\\\pages\\\\shop\\\\shop.component.jsx\";\nimport React from 'react';\nimport { Route } from 'react-router-dom';\nimport CollectionsOverview from '../../components/collections-overview/collections-overview.component';\nimport CollectionPage from '../collection/collection.component';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { fetchCollectionsStartAsync } from '../../redux/shop/shop.actions';\nimport { selectIsCollectionFetching, selectIsCollectionsLoaded } from '../../redux/shop/shop.selectors';\nimport WithSpinner from '../../components/with-spinner/with-spinner.component';\nconst CollectionsOverviewWithSpinner = WithSpinner(CollectionsOverview);\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\n\nclass ShopPage extends React.Component {\n  // constructor(){\n  //     super();\n  //     this.state = {\n  //         loading: true\n  //     }\n  // }\n  //It is exactly the same with the above (simplified way).React knows that if we have a class component \n  //and we write the state property like so, we just have an invoked state - (invocation of the super() in constructor)\n  // state = {\n  //     loading: true\n  // }\n  // Part of the Observer Pattern\n  //unsubscribeFromSnapshot = null;\n  componentDidMount() {\n    // Good pattern to fire off our API requests inside of componentDidMount\n    const {\n      fetchCollectionsStartAsync\n    } = this.props;\n    fetchCollectionsStartAsync(); // --------- Observer Pattern ---------------\n    // collectionRef.onSnapshot(async snapShot => {\n    //     const collectionsMap = convertCollectionsSnapshotToMap(snapShot);\n    //     updateCollections(collectionsMap);\n    //     this.setState({loading: false});\n    // });\n  }\n\n  render() {\n    const {\n      match,\n      isCollectionFetching,\n      isCollectionsLoaded\n    } = this.props;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"shop-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Route, {\n      exact: true,\n      path: `${match.path}`,\n      render: props => /*#__PURE__*/React.createElement(CollectionsOverviewWithSpinner, Object.assign({\n        isLoading: isCollectionFetching\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 36\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(Route, {\n      path: `${match.path}/:collectionId`,\n      render: props => /*#__PURE__*/React.createElement(CollectionPageWithSpinner, Object.assign({\n        isLoading: isCollectionFetching\n      }, props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 36\n        }\n      })),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nconst mapStateToProps = createStructuredSelector({\n  isCollectionFetching: selectIsCollectionFetching,\n  isCollectionsLoaded: selectIsCollectionsLoaded\n});\n\nconst mapDispatchToProps = dispatch => ({\n  fetchCollectionsStartAsync: () => dispatch(fetchCollectionsStartAsync())\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPage);","map":{"version":3,"sources":["C:/React Projects/andreas-ecommerce/src/pages/shop/shop.component.jsx"],"names":["React","Route","CollectionsOverview","CollectionPage","connect","createStructuredSelector","fetchCollectionsStartAsync","selectIsCollectionFetching","selectIsCollectionsLoaded","WithSpinner","CollectionsOverviewWithSpinner","CollectionPageWithSpinner","ShopPage","Component","componentDidMount","props","render","match","isCollectionFetching","isCollectionsLoaded","path","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAAQC,KAAR,QAAoB,kBAApB;AACA,OAAOC,mBAAP,MAAgC,sEAAhC;AACA,OAAOC,cAAP,MAA2B,oCAA3B;AACA,SAAQC,OAAR,QAAsB,aAAtB;AACA,SAAQC,wBAAR,QAAuC,UAAvC;AACA,SAAQC,0BAAR,QAAyC,+BAAzC;AACA,SAAQC,0BAAR,EAAoCC,yBAApC,QAAoE,iCAApE;AACA,OAAOC,WAAP,MAAwB,sDAAxB;AAEA,MAAMC,8BAA8B,GAAGD,WAAW,CAACP,mBAAD,CAAlD;AACA,MAAMS,yBAAyB,GAAGF,WAAW,CAACN,cAAD,CAA7C;;AAEA,MAAMS,QAAN,SAAuBZ,KAAK,CAACa,SAA7B,CAAsC;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACC;AAEAC,EAAAA,iBAAiB,GAAE;AAChB;AACA,UAAM;AAACR,MAAAA;AAAD,QAA+B,KAAKS,KAA1C;AACAT,IAAAA,0BAA0B,GAHV,CAIhB;AACA;AACA;AACA;AACA;AACA;AACF;;AAGFU,EAAAA,MAAM,GAAE;AACJ,UAAM;AAACC,MAAAA,KAAD;AAAQC,MAAAA,oBAAR;AAA8BC,MAAAA;AAA9B,QAAqD,KAAKJ,KAAhE;AAEA,wBACI;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,KAAD;AAAO,MAAA,KAAK,MAAZ;AAAa,MAAA,IAAI,EAAG,GAAEE,KAAK,CAACG,IAAK,EAAjC;AACA,MAAA,MAAM,EAAGL,KAAD,iBAAW,oBAAC,8BAAD;AAAgC,QAAA,SAAS,EAAEG;AAA3C,SAAqEH,KAArE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,eAGI,oBAAC,KAAD;AAAO,MAAA,IAAI,EAAG,GAAEE,KAAK,CAACG,IAAK,gBAA3B;AACA,MAAA,MAAM,EAAGL,KAAD,iBAAW,oBAAC,yBAAD;AAA2B,QAAA,SAAS,EAAEG;AAAtC,SAAgEH,KAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHJ,CADJ;AAkBH;;AAnDiC;;AAqDtC,MAAMM,eAAe,GAAGhB,wBAAwB,CAAC;AAC7Ca,EAAAA,oBAAoB,EAAEX,0BADuB;AAE7CY,EAAAA,mBAAmB,EAAEX;AAFwB,CAAD,CAAhD;;AAKA,MAAMc,kBAAkB,GAAGC,QAAQ,KAAK;AACpCjB,EAAAA,0BAA0B,EAAE,MAAMiB,QAAQ,CAACjB,0BAA0B,EAA3B;AADN,CAAL,CAAnC;;AAIA,eAAeF,OAAO,CAACiB,eAAD,EAAkBC,kBAAlB,CAAP,CAA6CV,QAA7C,CAAf","sourcesContent":["import React from 'react';\r\nimport {Route} from 'react-router-dom';\r\nimport CollectionsOverview from '../../components/collections-overview/collections-overview.component';\r\nimport CollectionPage from '../collection/collection.component';\r\nimport {connect} from 'react-redux';\r\nimport {createStructuredSelector} from 'reselect';\r\nimport {fetchCollectionsStartAsync} from '../../redux/shop/shop.actions';\r\nimport {selectIsCollectionFetching, selectIsCollectionsLoaded} from '../../redux/shop/shop.selectors';\r\nimport WithSpinner from '../../components/with-spinner/with-spinner.component';\r\n\r\nconst CollectionsOverviewWithSpinner = WithSpinner(CollectionsOverview);\r\nconst CollectionPageWithSpinner = WithSpinner(CollectionPage);\r\n\r\nclass ShopPage extends React.Component{\r\n\r\n    // constructor(){\r\n    //     super();\r\n    //     this.state = {\r\n    //         loading: true\r\n    //     }\r\n    // }\r\n    //It is exactly the same with the above (simplified way).React knows that if we have a class component \r\n    //and we write the state property like so, we just have an invoked state - (invocation of the super() in constructor)\r\n    // state = {\r\n    //     loading: true\r\n    // }\r\n\r\n    // Part of the Observer Pattern\r\n     //unsubscribeFromSnapshot = null;\r\n\r\n     componentDidMount(){\r\n        // Good pattern to fire off our API requests inside of componentDidMount\r\n        const {fetchCollectionsStartAsync} = this.props;\r\n        fetchCollectionsStartAsync();\r\n        // --------- Observer Pattern ---------------\r\n        // collectionRef.onSnapshot(async snapShot => {\r\n        //     const collectionsMap = convertCollectionsSnapshotToMap(snapShot);\r\n        //     updateCollections(collectionsMap);\r\n        //     this.setState({loading: false});\r\n        // });\r\n     }\r\n\r\n\r\n    render(){\r\n        const {match, isCollectionFetching, isCollectionsLoaded} = this.props;\r\n\r\n        return(\r\n            <div className='shop-page'>\r\n                <Route exact path={`${match.path}`} \r\n                render={(props) => <CollectionsOverviewWithSpinner isLoading={isCollectionFetching} {...props}/> } />\r\n                <Route path={`${match.path}/:collectionId`} \r\n                render={(props) => <CollectionPageWithSpinner isLoading={isCollectionFetching} {...props}/> } />\r\n            \r\n            {/* When you use the component props, the router uses React.createElement to create a new React element\r\n            from the given component. That means if you provide an inline function to the component attribute, you \r\n            would create a new component every render. This results in the existing \r\n            component unmounting and the new component mounting instead of just updating the existing component.\r\n            \r\n            So, if you need to pass a prop (In our case \"loading\") to a component being rendered by React Router,\r\n             instead of using Routes component prop, use its render prop passing it an inline function then \r\n             pass along the arguments to the element youâ€™re creating. */}\r\n            \r\n            </div>\r\n        );\r\n    }\r\n}\r\nconst mapStateToProps = createStructuredSelector({\r\n    isCollectionFetching: selectIsCollectionFetching,\r\n    isCollectionsLoaded: selectIsCollectionsLoaded\r\n});\r\n\r\nconst mapDispatchToProps = dispatch => ({\r\n    fetchCollectionsStartAsync: () => dispatch(fetchCollectionsStartAsync())\r\n});\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShopPage);"]},"metadata":{},"sourceType":"module"}